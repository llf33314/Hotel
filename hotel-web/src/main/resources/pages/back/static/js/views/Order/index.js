webpackJsonp([6],{109:function(e,t,o){o(248);var a=o(4)(o(175),o(269),"data-v-4f90d4b7",null);e.exports=a.exports},163:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(0),r=o(11),l=(o(7),o(109)),s=o.n(l),n=o(3),i=o(1),c=[{path:"/",redirect:function(e){return"/Order"}},{path:"/Order",component:s.a}];a.default.use(r.a);var d=new r.a({routes:c});new a.default({store:n.a,router:d}).$mount("#app"),i.a.backconfig().then(function(e){0==e.code&&n.a.commit("backConfig",e.data)})},175:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(13),r=o.n(a),l=o(22),s=o.n(l),n=o(1),i=o(12),c=o(3);t.default={data:function(){var e=this,t=function(t,o,a){if(!e.addOrderform.customerIdType)return a(new Error("请选择证件类型！"));if(!o)return a(new Error("请输入证件号码"));if(0==e.addOrderform.customerIdType){if(!/(^\d{17}([0-9]|X)$)/.test(o))return a(new Error("请输入正确的二代身份证号！"));a()}else if(1==e.addOrderform.customerIdType){if(!/(^\d{15}$)/.test(o))return a(new Error("请输入正确的一代身份证号！"));a()}else if(2==e.addOrderform.customerIdType){if(!/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(o))return a(new Error("请输入正确的驾驶证！"));a()}else if(3==e.addOrderform.customerIdType){if(!/(^1[45][0-9]{7}|([P|p|S|s]\d{7})|([S|s|G|g]\d{8})|([Gg|Tt|Ss|Ll|Qq|Dd|Aa|Ff]\d{8})|([H|h|M|m]\d{8，10})$)/.test(o))return a(new Error("请输入正确的护照！"));a()}else if(6==e.addOrderform.customerIdType){if(!/(^[HMhm]{1}([0-9]{10}|[0-9]{8})$)/.test(o))return a(new Error("请输入正确的港澳通行证！"));a()}},o=function(t,o,a){if(!e.checkInnewdata.customerIdType)return a(new Error("请选择证件类型！"));if(!o)return a(new Error("请输入证件号码"));if(0==e.checkInnewdata.customerIdType){if(!/(^\d{17}([0-9]|X)$)/.test(o))return a(new Error("请输入正确的二代身份证号！"));a()}else if(1==e.checkInnewdata.customerIdType){if(!/(^\d{15}$)/.test(o))return a(new Error("请输入正确的一代身份证号！"));a()}else if(2==e.checkInnewdata.customerIdType){if(!/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(o))return a(new Error("请输入正确的驾驶证！"));a()}else if(3==e.checkInnewdata.customerIdType){if(!/(^1[45][0-9]{7}|([P|p|S|s]\d{7})|([S|s|G|g]\d{8})|([Gg|Tt|Ss|Ll|Qq|Dd|Aa|Ff]\d{8})|([H|h|M|m]\d{8，10})$)/.test(o))return a(new Error("请输入正确的护照！"));a()}else if(6==e.checkInnewdata.customerIdType){if(!/(^[HMhm]{1}([0-9]{10}|[0-9]{8})$)/.test(o))return a(new Error("请输入正确的港澳通行证！"));a()}};return{activeName:"first",roomorderlist:[],pages1:1,currentPage1:1,roomkeyword:null,roomHotelId:null,roomPayStatus:null,roomPrderStatus:null,roomTime:"",Hotellist:[],Hotellist1:[],Orderstatus:[{value:"",label:"全部"},{value:0,label:"处理中"},{value:1,label:"已确认"},{value:2,label:"已取消"},{value:3,label:"已完成"}],Paymentstatus:[{value:"",label:"全部"},{value:0,label:"待支付"},{value:1,label:"已支付"},{value:2,label:"退款中"},{value:3,label:"已退款"}],addOrderform:{customerName:"",customerIdType:"",customerPhone:"",customerIdCard:"",customerGender:"",checkStandard:0,guestType:0,roomTime:"",hotelId:"",hotelName:"",orderStatus:"",payType:"",realPrice:""},rules:{customerName:[{required:!0,message:"请输入客人姓名"}],customerIdType:[{required:!0,message:"请选择证件类型"}],customerPhone:[{required:!0,validator:i.phonetest,message:"请输入手机号码"}],customerIdCard:[{required:!0,validator:t}],customerGender:[{required:!0,message:"请选择性别"}],roomTime:[{required:!0,message:"请选择入离日期"}],hotelId:[{required:!0,message:"请选择酒店"}],orderStatus:[{required:!0,message:"请选择订单状态"}],payType:[{required:!0,message:"请选择支付方式"}],realPrice:[{required:!0,validator:i.PriceRange,message:"请输入金额"}]},formInline:{roomNumber:"",categoryId:""},money:{Total:"",room:"",deposit:""},Popup:"提示",roomsDetails:{},foodorderlist:[],foodhotelId:null,foodProvidesName:null,foodorderStatus:null,foodpayStatus:null,foodTime:[],foodkeyword:null,pages3:0,currentPage3:1,acknowledgeid:"",completeid:"",canceid:"",refundsid:"",deleteid:"",checkInid:"",checkOutid:"",input:"",provideFroms:[{value:0,label:"本酒店"},{value:1,label:"合作方"}],dialogFormVisible:!1,dialogFormVisible1:!1,dialogFormVisible2:!1,dialogFormVisible3:!1,dialogFormVisible4:!1,dialogFormVisible5:!1,dialogFormVisible6:!1,dialogFormVisible7:!1,dialogFormVisible8:!1,dialogFormVisible9:!1,dialogFormVisible10:!1,dialogFormVisible11:!1,roomData:[],RoomTypes:[],roomAll:[],Selection:[],checkIndata:[],checkInnewdata:{customerGender:"",customerIdCard:"",customerIdType:"",customerName:"",customerPhone:"",rooms:[]},checkInrules:{customerGender:[{required:!0,message:"请选择性别"}],customerIdType:[{required:!0,message:"请选择证件类型"}],customerIdCard:[{required:!0,validator:o}]},checkInform:{roomNumber:"",categoryId:""},checkInformRoomTypes:[],checkInroomData:[],checkInRoomAll:[],checkInSelection:[],checkOutdata:"",checkOutform:{refundFee:"",refundReason:""},checkOutrules:{refundFee:[{required:!0,validator:i.integertest,message:"请输入退还金额"}]}}},methods:{handleClick:function(){if(0==this.Hotellist.length)return this.$message("无酒店,请添加酒店"),!1;"first"==this.activeName&&this.roomHotelId!=sessionStorage.getItem("hotelId")&&(sessionStorage.getItem("hotelId")?this.roomHotelId=Number(sessionStorage.getItem("hotelId")):this.roomHotelId=this.Hotellist[0].hotelId),"second"==this.activeName&&this.foodhotelId!=sessionStorage.getItem("hotelId")&&(sessionStorage.getItem("hotelId")?this.foodhotelId=Number(sessionStorage.getItem("hotelId")):this.foodhotelId=this.Hotellist[0].hotelId)},changeroomId:function(){sessionStorage.setItem("hotelId",this.roomHotelId),this.changeroomlist()},changefoodId:function(){sessionStorage.setItem("hotelId",this.foodhotelId),this.changefoodlist()},getRoomType:function(){var e=this,t=this;n.b.roomtypelist({params:{hotelId:this.addOrderform.hotelId}}).then(function(o){0==o.code&&(e.RoomTypes=o.data.records,e.RoomTypes.length>0?(e.dialogFormVisible6=!0,setTimeout(function(){0==t.roomData.length&&(t.formInline.categoryId=t.RoomTypes[0].categoryId)},100)):e.$message({message:"该酒店没房型，请添加房间",type:"warning"}))})},getrooms:function(){var e=this;n.b.allroom({Suffix:this.addOrderform.hotelId+"/roomAll",params:this.formInline}).then(function(t){0==t.code&&(e.roomAll=JSON.parse(r()(t.data)),e.checkToggle())})},changeroomlist:function(){var e=this,t=null,a=null;this.roomTime[0]&&(t=o.i(i.DateFormat)(new Date(this.roomTime[0]).getTime(),"yyyy-MM-dd hh:mm:ss")),this.roomTime[1]&&(a=o.i(i.DateFormat)(new Date(this.roomTime[1]).getTime(),"yyyy-MM-dd hh:mm:ss")),n.c.Orderroomlist({params:{page:this.currentPage1,keyword:this.roomkeyword,hotelId:this.roomHotelId,payStatus:this.roomPayStatus,orderStatus:this.roomPrderStatus,roomInTime:t,roomOutTime:a}}).then(function(t){0==t.code&&(e.roomorderlist=t.data.records,e.pages1=t.data.pages,e.currentPage1>e.pages1&&(e.currentPage1=1))})},handleCurrentChange1:function(e){this.changeroomlist()},addOrderfn:function(){this.dialogFormVisible5=!0},addroom:function(){return this.addOrderform.hotelId?0==this.addOrderform.roomTime.length?(this.$message({message:"请选择入离日期",type:"warning"}),!1):(this.getRoomType(),this.Selection=JSON.parse(r()(this.roomData)),void this.checkToggle()):(this.$message({message:"请选择酒店",type:"warning"}),!1)},select:function(e,t,o){var a=this;this.Selection.some(function(e){return e.id===t.id})?this.Selection.forEach(function(e,r){e.id!==t.id||o||a.Selection.splice(r,1)}):this.Selection.push(t)},allSelect:function(e){var t=this;e.length?this.roomAll.forEach(function(e){t.select(null,e,!0)}):this.roomAll.forEach(function(e){t.select(null,e,!1)})},checkToggle:function(){var e=this;this.roomAll.forEach(function(t,o){e.Selection.forEach(function(a){if(t.id===a.id){var r=e;e.$nextTick(function(){r.$refs.multipleTable.toggleRowSelection(r.roomAll[o])})}})})},deletefn:function(e){var t=this,o=this.Selection.splice(e,1);this.roomAll.forEach(function(e,a){e.id===o[0].id&&t.$refs.multipleTable.toggleRowSelection(e,!1)})},count:function(){var e=this;this.money.Total=0,this.money.room=0,this.money.deposit=0,n.c.ordergetPrice({Suffix:this.addOrderform.hotelId+"/getPrice",params:{categoryId:this.roomData[0].categoryId,categoryName:this.roomData[0].categoryName,checkStandard:0,number:this.roomData.length,rackRate:this.roomData[0].rackRate,deposit:this.roomData[0].deposit,roomInTime:o.i(i.DateFormat)(new Date(this.addOrderform.roomTime[0]).getTime(),"yyyy-MM-dd hh:mm:ss"),roomOutTime:o.i(i.DateFormat)(new Date(this.addOrderform.roomTime[1]).getTime(),"yyyy-MM-dd hh:mm:ss")}}).then(function(t){if(0!=t.code)return e.$message({message:"价格计算错误",type:"warning"}),!1;e.money.Total=t.data.payPrice,e.money.room=t.data.roomPrice,e.money.deposit=t.data.deposit})},roomTimechange:function(){0!=this.roomData.length&&this.count()},confirmfn:function(){this.roomData=JSON.parse(r()(this.Selection)),this.$refs.multipleTable.clearSelection(),this.count(),this.dialogFormVisible6=!1},qixiaofn:function(){this.$refs.multipleTable.clearSelection(),this.dialogFormVisible6=!1},handleEditroom:function(e){this.roomData.splice(e,1),this.count()},Submit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(t.roomData.length>0){var a=JSON.parse(r()(t.addOrderform));a.categoryId=t.roomData[0].categoryId,a.categoryName=t.roomData[0].categoryName,t.Hotellist1.forEach(function(e){e.hotelId==this.addOrderform.hotelId&&(a.hotelName=e.name)},t),a.rackRate=t.roomData[0].rackRate,a.roomPrice=t.roomData[0].rackRate,a.deposit=t.roomData[0].deposit,a.receivablePrice=100*t.money.Total,a.realPrice=100*t.addOrderform.realPrice,a.rooms=[],a.roomInTime=o.i(i.DateFormat)(new Date(a.roomTime[0]).getTime(),"yyyy-MM-dd hh:mm:ss"),a.roomOutTime=o.i(i.DateFormat)(new Date(a.roomTime[1]).getTime(),"yyyy-MM-dd hh:mm:ss"),t.roomData.forEach(function(e){var t={categoryId:e.categoryId,categoryName:e.categoryName,roomId:e.id,roomNum:e.roomNum};a.rooms.push(t)},t),n.c.addOrder({params:a}).then(function(e){0==e.code&&(t.$refs.addOrderform.resetFields(),t.roomData=[],t.dialogFormVisible5=!1,t.changeroomlist(),t.$message({message:"保存成功",type:"success"}))})}else t.$message.error("请选择房间")})},Cancel:function(){this.$refs.addOrderform.resetFields(),this.roomData=[],this.dialogFormVisible5=!1},orderDetailsfn:function(e){var t=this;n.c.orderDetails({Suffix:e}).then(function(e){0==e.code&&(t.roomsDetails=e.data,t.roomsDetails.Discountmoney=0,t.roomsDetails.receivablePrice&&(t.roomsDetails.couponsDiscount&&(t.roomsDetails.Discountmoney=Number(t.roomsDetails.receivablePrice)-Number(t.roomsDetails.couponsDiscount)),t.roomsDetails.couponsDiscount&&(t.roomsDetails.Discountmoney=Number(t.roomsDetails.receivablePrice)-Number(t.roomsDetails.couponsDiscount)),t.roomsDetails.integralDiscount&&(t.roomsDetails.Discountmoney=Number(t.roomsDetails.receivablePrice)-Number(t.roomsDetails.integralDiscount))),t.roomsDetails.length=e.data.rooms.length,t.dialogFormVisible1=!0)})},CheckInbtn:function(e){var t=this;this.checkInid=e,n.c.orderDetails({Suffix:e}).then(function(e){0==e.code&&(t.checkIndata=e.data,t.checkIndata.Discountmoney=0,t.checkInnewdata.customerName=e.data.customerName,t.checkInnewdata.customerPhone=e.data.customerPhone,t.checkIndata.receivablePrice&&(t.checkIndata.couponsDiscount&&(t.checkIndata.Discountmoney=Number(t.checkIndata.receivablePrice)-Number(t.checkIndata.couponsDiscount)),t.checkIndata.couponsDiscount&&(t.checkIndata.Discountmoney=Number(t.checkIndata.receivablePrice)-Number(t.checkIndata.couponsDiscount)),t.checkIndata.integralDiscount&&(t.checkIndata.Discountmoney=Number(t.checkIndata.receivablePrice)-Number(t.checkIndata.integralDiscount))),t.checkInformRoomTypes=[{categoryId:t.checkIndata.categoryId,name:t.checkIndata.categoryName}],t.checkIndata.length=e.data.rooms.length,t.dialogFormVisible=!0)})},addcheckInrooms:function(){if(this.checkIndata.number<=this.checkInroomData.length)return this.$message({message:"房间数等于预定的数量",type:"warning"}),!1;this.dialogFormVisible10=!0;var e=this;setTimeout(function(){e.checkInform.categoryId=e.checkInformRoomTypes[0].categoryId,e.checkIngetrooms()},100)},checkIngetrooms:function(){var e=this;n.b.allroom({Suffix:this.checkIndata.hotelId+"/roomAll",params:this.checkInform}).then(function(t){0==t.code&&(e.checkInRoomAll=JSON.parse(r()(t.data)),e.checkInSelection=JSON.parse(r()(e.checkInroomData)),e.checkIncheckToggle())})},checkInselect:function(e,t,o){var a=this;this.checkInSelection.some(function(e){return e.id===t.id})?this.checkInSelection.forEach(function(e,r){e.id!==t.id||o||a.checkInSelection.splice(r,1)}):this.checkInSelection.push(t)},checkInallSelect:function(e){var t=this;e.length?this.checkInRoomAll.forEach(function(e){t.checkInselect(null,e,!0)}):this.checkInRoomAll.forEach(function(e){t.checkInselect(null,e,!1)})},checkIncheckToggle:function(){var e=this;this.checkInRoomAll.forEach(function(t,o){e.checkInSelection.forEach(function(a){if(t.id===a.id){var r=e;e.$nextTick(function(){r.$refs.multipleTable2.toggleRowSelection(r.checkInRoomAll[o])})}})})},checkIndeletefn:function(e){var t=this,o=this.checkInSelection.splice(e,1);this.checkInRoomAll.forEach(function(e,a){e.id===o[0].id&&t.$refs.multipleTable2.toggleRowSelection(e,!1)})},checkInconfirmfn:function(){if(this.checkIndata.number<this.checkInSelection.length)return this.$message({message:"房间数超过预定的数量",type:"warning"}),!1;this.checkInroomData=JSON.parse(r()(this.checkInSelection)),this.$refs.multipleTable2.clearSelection(),this.dialogFormVisible10=!1},checkInhandleEditroom:function(e){this.checkInroomData.splice(e,1)},qixiaofn2:function(){this.$refs.multipleTable2.clearSelection(),this.dialogFormVisible10=!1},checkInensure:function(e){var t=this;this.$refs[e].validate(function(o){return!!o&&(t.checkIndata.number>t.checkInroomData.length?(t.$message({message:"房间数未达到预定的数量",type:"warning"}),!1):(t.checkInroomData.forEach(function(e){t.checkInnewdata.rooms.push({categoryId:e.categoryId,categoryName:e.categoryName,roomId:e.id,roomNum:e.roomNum})}),void n.c.ordercheckIn({Suffix:t.checkInid+"/checkIn"}).then(function(o){0==o.code&&(t.$refs[e].resetFields(),t.dialogFormVisible=!1,t.$message({message:"入住成功",type:"success"}),t.changeroomlist())})))})},orderExport:function(){var e=null,t=null;this.roomTime[0]&&(e=o.i(i.DateFormat)(new Date(this.roomTime[0]).getTime(),"yyyy-MM-dd hh:mm:ss")),this.roomTime[1]&&(t=o.i(i.DateFormat)(new Date(this.roomTime[1]).getTime(),"yyyy-MM-dd hh:mm:ss"));var a="";if(this.roomkeyword&&(a=a+"keyword="+this.roomkeyword),this.roomHotelId){var r=a.indexOf("=");a=r>-1?a+"&hotelId="+this.roomHotelId:a+"hotelId="+this.roomHotelId}if(this.payStatus){var r=a.indexOf("=");a=r>-1?a+"&payStatus="+this.payStatus:a+"payStatus="+this.payStatus}if(this.orderStatus){var r=a.indexOf("=");a=r>-1?a+"&orderStatus="+this.orderStatus:a+"orderStatus="+this.orderStatus}if(e){var r=a.indexOf("=");a=r>-1?a+"&roomInTime="+e:a+"roomInTime="+e}if(t){var r=a.indexOf("=");a=r>-1?a+"&roomOutTime="+t:a+"roomOutTime="+t}window.open(c.a.state.baseURL+"/back/order/roomExport?"+a)},changefoodlist:function(){var e=this,t=null,a=null;this.foodTime[0]&&(t=o.i(i.DateFormat)(new Date(this.foodTime[0]).getTime(),"yyyy-MM-dd hh:mm:ss")),this.foodTime[1]&&(a=o.i(i.DateFormat)(new Date(this.foodTime[1]).getTime(),"yyyy-MM-dd hh:mm:ss")),n.c.foodlist({params:{page:this.currentPage3,keyword:this.foodkeyword,hotelId:this.foodhotelId,payStatus:this.foodpayStatus,orderStatus:this.foodorderStatus,beginTime:t,endTime:a,foodProvidesName:this.foodProvidesName}}).then(function(t){0==t.code&&(e.foodorderlist=t.data.records,e.pages3=t.data.pages)})},foodExport:function(){var e=null,t=null;this.foodTime[0]&&(e=o.i(i.DateFormat)(new Date(this.foodTime[0]).getTime(),"yyyy-MM-dd hh:mm:ss")),this.foodTime[1]&&(t=o.i(i.DateFormat)(new Date(this.foodTime[1]).getTime(),"yyyy-MM-dd hh:mm:ss"));var a="";if(this.foodkeyword&&(a=a+"keyword="+this.foodkeyword),this.foodhotelId){var r=a.indexOf("=");a=r>-1?a+"&hotelId="+this.foodhotelId:a+"hotelId="+this.foodhotelId}if(this.foodpayStatus){var r=a.indexOf("=");a=r>-1?a+"&payStatus="+this.foodpayStatus:a+"payStatus="+this.foodpayStatus}if(this.foodorderStatus){var r=a.indexOf("=");a=r>-1?a+"&orderStatus="+this.foodorderStatus:a+"orderStatus="+this.foodorderStatus}if(this.foodProvidesName){var r=a.indexOf("=");a=r>-1?a+"&foodProvidesName="+this.foodProvidesName:a+"foodProvidesName="+this.foodProvidesName}if(e){var r=a.indexOf("=");a=r>-1?a+"&beginTime="+e:a+"beginTime="+e}if(t){var r=a.indexOf("=");a=r>-1?a+"&endTime="+t:a+"endTime="+t}window.open(c.a.state.baseURL+"/back/order/foodExport?"+a)},handleCurrentChange3:function(){this.changefoodlist()},cancelbtn:function(e){this.canceid=e,this.dialogFormVisible8=!0},cancefn:function(){var e=this;n.c.cancelOrder({Suffix:this.canceid+"/cancel"}).then(function(t){if(0==t.code){e.dialogFormVisible8=!1,e.Popup="取消成功",e.dialogFormVisible3=!0;var o=e;setTimeout(function(){o.dialogFormVisible3=!1,"first"==o.activeName?o.changeroomlist():"second"==o.activeName&&o.changefoodlist()},3e3)}})},acknowledgebtn:function(e){this.acknowledgeid=e,this.dialogFormVisible2=!0},acknowledgefn:function(){var e=this;n.c.orderconfirm({Suffix:this.acknowledgeid+"/confirm"}).then(function(t){if(0==t.code){e.dialogFormVisible2=!1,e.Popup="确定成功",e.dialogFormVisible3=!0;var o=e;setTimeout(function(){o.dialogFormVisible3=!1,"first"==o.activeName?o.changeroomlist():"second"==o.activeName&&o.changefoodlist()},3e3)}})},completebtn:function(e){this.completeid=e,this.dialogFormVisible9=!0},completefn:function(){var e=this;n.c.ordercomplete({Suffix:this.completeid+"/complete"}).then(function(t){if(0==t.code){e.dialogFormVisible9=!1,e.Popup="订单已完成",e.dialogFormVisible3=!0;var o=e;setTimeout(function(){o.dialogFormVisible3=!1,"first"==o.activeName?o.changeroomlist():"second"==o.activeName&&o.changefoodlist()},3e3)}})},refundsbtn:function(e){this.refundsid=e,this.dialogFormVisible4=!0},refundsfn:function(){var e=this;n.c.orderrefunds({Suffix:this.refundsid+"/refunds"}).then(function(t){if(0==t.code){e.dialogFormVisible4=!1,e.Popup="退款成功",e.dialogFormVisible3=!0;var o=e;setTimeout(function(){o.dialogFormVisible3=!1,"first"==o.activeName?o.changeroomlist():"second"==o.activeName&&o.changefoodlist()},3e3)}})},deleteorderfn:function(e){this.deleteid=e,this.dialogFormVisible7=!0},deleteidbtn:function(){var e=this;n.c.orderDelete({params:"["+this.deleteid+"]"}).then(function(t){if(0==t.code){e.dialogFormVisible7=!1,e.Popup="删除成功",e.dialogFormVisible3=!0;var o=e;setTimeout(function(){o.dialogFormVisible3=!1,"first"==o.activeName?o.changeroomlist():"second"==o.activeName&&o.changefoodlist()},3e3)}})},checkOutbtn:function(e){var t=this;this.checkOutid=e,n.c.orderDetails({Suffix:e}).then(function(e){0==e.code&&(t.checkOutdata=e.data,t.checkOutdata.Discountmoney=0,t.checkOutdata.receivablePrice&&(t.checkOutdata.couponsDiscount&&(t.checkOutdata.Discountmoney=Number(t.checkOutdata.receivablePrice)-Number(t.checkOutdata.couponsDiscount)),t.checkOutdata.couponsDiscount&&(t.checkOutdata.Discountmoney=Number(t.checkOutdata.receivablePrice)-Number(t.checkOutdata.couponsDiscount)),t.checkOutdata.integralDiscount&&(t.checkIndata.Discountmoney=Number(t.checkOutdata.receivablePrice)-Number(t.checkOutdata.integralDiscount))),t.dialogFormVisible11=!0)})},checkOutsubmit:function(e){var t=this;this.$refs[e].validate(function(o){if(!o)return!1;var a=t,l=JSON.parse(r()(a.checkOutform));l.refundFee=100*l.refundFee,n.c.ordercheckOut({Suffix:t.checkOutid+"/checkOut",params:l}).then(function(o){if(0==o.code)if(o.data){var r=o.data;t.$store.dispatch("getbackconfig").then(function(){window.parent.location.href=t.$store.state.apiUrl+"/alipay/79B4DE7C/refund.do?obj="+r})}else t.$message({message:"退房成功",type:"success"}),a.changeroomlist(),a.dialogFormVisible11=!1,t.$refs[e].resetFields()})})},checkOutreset:function(e){this.$refs[e].resetFields(),this.dialogFormVisible11=!1}},mounted:function(){var e=this;n.a.Hotellist().then(function(t){0==t.code&&(0!=t.data.records.length?(e.Hotellist=JSON.parse(r()(t.data.records)),e.Hotellist.unshift({name:"全部酒店",hotelId:""}),e.Hotellist1=JSON.parse(r()(t.data.records)),sessionStorage.getItem("hotelId")?e.roomHotelId=Number(sessionStorage.getItem("hotelId")):(e.roomHotelId=e.Hotellist[0].hotelId,sessionStorage.setItem("hotelId",e.roomHotelId))):e.$message("无酒店,请添加酒店"))})},components:{Confirm:s.a}}},248:function(e,t){},269:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"Order"},[o("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"房间订单",name:"first"}},[o("div",{staticClass:"Order-region"},[o("div",{staticClass:"Order-top"},[o("p",[e._v("说明：")]),e._v(" "),o("p",[e._v("本部分【房间订单】提供给商家处理来自手机端的房间订单。对于电话订单、前台订单，请在已有ERP系统中处理。")]),e._v(" "),o("el-select",{attrs:{placeholder:"酒店"},on:{change:e.changeroomId},model:{value:e.roomHotelId,callback:function(t){e.roomHotelId=t},expression:"roomHotelId"}},e._l(e.Hotellist,function(e){return o("el-option",{key:e.hotelId,attrs:{label:e.name,value:e.hotelId}})})),e._v(" "),o("el-select",{attrs:{placeholder:"订单状态"},on:{change:e.changeroomlist},model:{value:e.roomPrderStatus,callback:function(t){e.roomPrderStatus=t},expression:"roomPrderStatus"}},e._l(e.Orderstatus,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),o("el-select",{attrs:{placeholder:"支付状态"},on:{change:e.changeroomlist},model:{value:e.roomPayStatus,callback:function(t){e.roomPayStatus=t},expression:"roomPayStatus"}},e._l(e.Paymentstatus,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),o("el-date-picker",{attrs:{type:"daterange",placeholder:"选择时间范围"},on:{change:e.changeroomlist},model:{value:e.roomTime,callback:function(t){e.roomTime=t},expression:"roomTime"}}),e._v(" "),o("el-input",{attrs:{placeholder:"请输入预订人、电话",icon:"search","on-icon-click":e.changeroomlist},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.changeroomlist(t)}},model:{value:e.roomkeyword,callback:function(t){e.roomkeyword=t},expression:"roomkeyword"}}),e._v(" "),o("div",[o("el-button",{attrs:{type:"primary"},on:{click:e.addOrderfn}},[e._v("添加线下订单")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.orderExport}},[e._v("导出订单")])],1)],1),e._v(" "),0!=e.roomorderlist.length?o("div",{staticClass:"Order-bottom"},[o("h2",[e._v("房间订单")]),e._v(" "),o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.roomorderlist,"tooltip-effect":"dark"}},[o("el-table-column",{attrs:{label:"酒店名称",prop:"hotelName","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{label:"姓名",prop:"customerName","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{label:"手机号",prop:"customerPhone","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{label:"入住/离店时间","show-overflow-tooltip":"",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("timeconvert")(t.row.roomInTime))+" / "+e._s(e._f("timeconvert")(t.row.roomOutTime))+"\n              ")]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"categoryName",label:"房间类型","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"number",label:"预订间数","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{label:"门市价(元)","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("money")(t.row.rackRate))+"\n              ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"订单状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("OrderStatus")(t.row.orderStatus))+"\n              ")]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"payStatus",label:"支付状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("PaymentStatus")(t.row.payStatus))+"\n              ")]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"payType",label:"支付方式","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("PaymentMethod")(t.row.payType))+"\n              ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{staticClass:"blue-button",attrs:{size:"small"},on:{click:function(o){e.orderDetailsfn(t.row.id)}}},[e._v("详情")]),e._v(" "),0==t.row.orderStatus?o("el-button",{staticClass:"blue-button",attrs:{size:"small"},on:{click:function(o){e.acknowledgebtn(t.row.id)}}},[e._v("确认")]):e._e(),e._v(" "),1==t.row.orderStatus?o("el-button",{staticClass:"blue-button",attrs:{size:"small"},on:{click:function(o){e.CheckInbtn(t.row.id)}}},[e._v("入住")]):e._e(),e._v(" "),4==t.row.orderStatus&&1==t.row.payStatus?o("el-button",{staticClass:"blue-button",attrs:{size:"small"},on:{click:function(o){e.checkOutbtn(t.row.id)}}},[e._v("结账退房")]):e._e(),e._v(" "),0==t.row.orderStatus||1==t.row.orderStatus?o("el-button",{staticClass:"blue-button",attrs:{size:"small"},on:{click:function(o){e.cancelbtn(t.row.id)}}},[e._v("取消")]):e._e(),e._v(" "),2==t.row.orderStatus&&1==t.row.payStatus?o("el-button",{staticClass:"blue-button",attrs:{size:"small"},on:{click:function(o){e.refundsbtn(t.row.id)}}},[e._v(" 退款")]):e._e(),e._v(" "),2==t.row.orderStatus?o("el-button",{attrs:{size:"small"},on:{click:function(o){e.deleteorderfn(t.row.id)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),e.roomorderlist.length>1?o("el-pagination",{attrs:{"current-page":e.currentPage1,"page-count":e.pages1,layout:"prev, pager, next, jumper"},on:{"current-change":e.handleCurrentChange1,"update:currentPage":function(t){e.currentPage1=t}}}):e._e()],1):e._e()]),e._v(" "),0==e.roomorderlist.length?o("div",{staticClass:"NoData"},[o("i",{staticClass:"el-icon-warning"}),e._v(" "),o("p",[e._v("还没有相关数据")])]):e._e()]),e._v(" "),o("el-tab-pane",{attrs:{label:"客房订餐订单",name:"second"}},[o("div",{staticClass:"Order-region"},[o("div",{staticClass:"Order-top"},[o("p",[e._v("说明：")]),e._v(" "),o("p",[e._v("【客房订餐订单】仅用于商家处理来自于手机端的住客客房订餐订单。")]),e._v(" "),o("el-select",{attrs:{placeholder:"全部酒店"},on:{change:e.changefoodId},model:{value:e.foodhotelId,callback:function(t){e.foodhotelId=t},expression:"foodhotelId"}},e._l(e.Hotellist,function(e){return o("el-option",{key:e.hotelId,attrs:{label:e.name,value:e.hotelId}})})),e._v(" "),o("el-select",{attrs:{placeholder:"请选择菜品提供方"},on:{change:e.changefoodlist},model:{value:e.foodProvidesName,callback:function(t){e.foodProvidesName=t},expression:"foodProvidesName"}},e._l(e.provideFroms,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),o("el-select",{attrs:{placeholder:"订单状态"},on:{change:e.changefoodlist},model:{value:e.foodorderStatus,callback:function(t){e.foodorderStatus=t},expression:"foodorderStatus"}},e._l(e.Orderstatus,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),o("el-select",{attrs:{placeholder:"支付状态"},on:{change:e.changefoodlist},model:{value:e.foodpayStatus,callback:function(t){e.foodpayStatus=t},expression:"foodpayStatus"}},e._l(e.Paymentstatus,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),o("el-date-picker",{attrs:{type:"daterange",placeholder:"选择时间范围"},on:{change:e.changefoodlist},model:{value:e.foodTime,callback:function(t){e.foodTime=t},expression:"foodTime"}}),e._v(" "),o("el-input",{attrs:{placeholder:"请输入预订人、电话",icon:"search","on-icon-click":e.changefoodlist},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.changefoodlist(t)}},model:{value:e.foodkeyword,callback:function(t){e.foodkeyword=t},expression:"foodkeyword"}}),e._v(" "),o("div",[o("el-button",{attrs:{type:"primary"},on:{click:e.foodExport}},[e._v("导出订单")])],1)],1),e._v(" "),0!=e.foodorderlist.length?o("div",{staticClass:"Order-bottom"},[o("h2",[e._v("客房订餐订单")]),e._v(" "),o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.foodorderlist,"tooltip-effect":"dark"}},[o("el-table-column",{attrs:{label:"酒店名称",prop:"hotelName","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"customerName",label:"预订人","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"customerPhone",label:"电话","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"roomNum",label:"房号","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{label:"订单总额(元)","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("money")(t.row.realPrice))+"\n              ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"下单时间","show-overflow-tooltip":"",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("DateFormat")(t.row.createTime,"yyyy-MM-dd hh:mm:ss"))+"\n              ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"菜品提供方",prop:"foodProvidesName","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{label:"订单状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("OrderStatus")(t.row.orderStatus))+"\n              ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"支付状态","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("PaymentStatus")(t.row.payStatus))+"\n              ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"支付方式","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("PaymentMethod")(t.row.payType))+"\n              ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.orderStatus&1==t.row.payStatus?o("el-button",{staticClass:"blue-button",attrs:{size:"small"},on:{click:function(o){e.completebtn(t.row.id)}}},[e._v("完成")]):e._e(),e._v(" "),0==t.row.orderStatus?o("el-button",{staticClass:"blue-button",attrs:{size:"small"},on:{click:function(o){e.acknowledgebtn(t.row.id)}}},[e._v("确认")]):e._e(),e._v(" "),0==t.row.orderStatus?o("el-button",{staticClass:"blue-button",attrs:{size:"small"},on:{click:function(o){e.cancelbtn(t.row.id)}}},[e._v("取消")]):e._e(),e._v(" "),2==t.row.orderStatus&1==t.row.payStatus?o("el-button",{staticClass:"blue-button",attrs:{size:"small"},on:{click:function(o){e.refundsbtn(t.row.id)}}},[e._v("退款")]):e._e(),e._v(" "),o("el-button",{attrs:{size:"small"},on:{click:function(o){e.deleteorderfn(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),e.pages3>1?o("el-pagination",{attrs:{"current-page":e.currentPage3,"page-count":e.pages3,layout:"prev, pager, next, jumper"},on:{"current-change":e.handleCurrentChange3,"update:currentPage":function(t){e.currentPage3=t}}}):e._e()],1):e._e()]),e._v(" "),0==e.foodorderlist.length?o("div",{staticClass:"NoData"},[o("i",{staticClass:"el-icon-warning"}),e._v(" "),o("p",[e._v("还没有相关数据")])]):e._e()])],1),e._v(" "),o("el-dialog",{attrs:{visible:e.dialogFormVisible7,"modal-append-to-body":!1,"close-on-click-modal":!1,"custom-class":"Smallmodal header-hidder"},on:{"update:visible":function(t){e.dialogFormVisible7=t}}},[e._v("\n    是否确定删除？\n    "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.deleteidbtn}},[e._v("删除")]),e._v(" "),o("el-button",{on:{click:function(t){e.dialogFormVisible7=!1}}},[e._v("取 消")])],1)]),e._v(" "),o("el-dialog",{attrs:{visible:e.dialogFormVisible8,"modal-append-to-body":!1,"close-on-click-modal":!1,"custom-class":"Smallmodal header-hidder"},on:{"update:visible":function(t){e.dialogFormVisible8=t}}},[e._v("\n    是否取消订单？\n    "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.cancefn}},[e._v("确认")]),e._v(" "),o("el-button",{on:{click:function(t){e.dialogFormVisible8=!1}}},[e._v("取 消")])],1)]),e._v(" "),o("el-dialog",{attrs:{visible:e.dialogFormVisible2,"modal-append-to-body":!1,"close-on-click-modal":!1,"custom-class":"Smallmodal header-hidder"},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[e._v("\n    是否确认订单？\n    "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.acknowledgefn}},[e._v("确认")]),e._v(" "),o("el-button",{on:{click:function(t){e.dialogFormVisible2=!1}}},[e._v("取 消")])],1)]),e._v(" "),o("el-dialog",{attrs:{visible:e.dialogFormVisible4,"modal-append-to-body":!1,"close-on-click-modal":!1,"custom-class":"Smallmodal header-hidder"},on:{"update:visible":function(t){e.dialogFormVisible4=t}}},[e._v("\n    是否确定退款？\n    "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.refundsfn}},[e._v("退款")]),e._v(" "),o("el-button",{on:{click:function(t){e.dialogFormVisible4=!1}}},[e._v("取 消")])],1)]),e._v(" "),o("el-dialog",{attrs:{title:"提示",visible:e.dialogFormVisible3,"modal-append-to-body":!1,"close-on-click-modal":!1,"custom-class":"Smallmodal storey"},on:{"update:visible":function(t){e.dialogFormVisible3=t}}},[o("Confirm",{attrs:{Popup:e.Popup,flag:e.dialogFormVisible3}})],1),e._v(" "),o("el-dialog",{attrs:{visible:e.dialogFormVisible9,"modal-append-to-body":!1,"close-on-click-modal":!1,"custom-class":"Smallmodal header-hidder"},on:{"update:visible":function(t){e.dialogFormVisible9=t}}},[e._v("\n    是否完成订单？\n    "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.completefn}},[e._v("退款")]),e._v(" "),o("el-button",{on:{click:function(t){e.dialogFormVisible9=!1}}},[e._v("取 消")])],1)]),e._v(" "),o("el-dialog",{attrs:{title:"详情",visible:e.dialogFormVisible1,"modal-append-to-body":!1,"close-on-click-modal":!1,"custom-class":"fullmodal orderDetails"},on:{"update:visible":function(t){e.dialogFormVisible1=t}}},[o("h4",[e._v("客人资料")]),e._v(" "),o("div",{staticClass:"order-column"},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5}},[e._v("\n              客人姓名：\n            ")]),e._v(" "),o("el-col",{attrs:{span:19}},[e._v("\n              "+e._s(e.roomsDetails.customerName)+"\n            ")])],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5}},[e._v("\n              证件类型：\n            ")]),e._v(" "),o("el-col",{attrs:{span:19}},[e._v("\n              "+e._s(e._f("Certificates")(e.roomsDetails.customerIdType))+"\n            ")])],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5}},[e._v("\n              手机号码：\n            ")]),e._v(" "),o("el-col",{attrs:{span:19}},[e._v("\n              "+e._s(e.roomsDetails.customerPhone)+"\n            ")])],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5}},[e._v("\n              证件号码：\n            ")]),e._v(" "),o("el-col",{attrs:{span:19}},[e._v("\n              "+e._s(e.roomsDetails.customerIdCard)+"\n            ")])],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5}},[e._v("\n              性别：\n            ")]),e._v(" "),o("el-col",{attrs:{span:19}},[e._v("\n              "+e._s(e._f("Gender")(e.roomsDetails.customerGender))+"\n            ")])],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5}},[e._v("\n              住客类型：\n            ")]),e._v(" "),o("el-col",{attrs:{span:19}},[e._v("\n              "+e._s(e._f("guestType")(e.roomsDetails.guestType))+"\n            ")])],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5}},[e._v("\n              入住标准：\n            ")]),e._v(" "),o("el-col",{attrs:{span:19}},[e._v("\n              "+e._s(e._f("RoomType")(e.roomsDetails.checkStandard))+"\n            ")])],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5}},[e._v("\n              入离日期：\n            ")]),e._v(" "),o("el-col",{attrs:{span:19}},[e._v("\n              "+e._s(e._f("timeconvert")(e.roomsDetails.roomInTime))+" / "+e._s(e._f("timeconvert")(e.roomsDetails.roomOutTime))+"\n            ")])],1)],1)],1),e._v(" "),o("el-row",[e.roomsDetails.rooms?o("el-col",{attrs:{span:12}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5}},[e._v("\n              房间类型：\n            ")]),e._v(" "),o("el-col",{attrs:{span:19}},[e._v("\n              "+e._s(e.roomsDetails.categoryName)+"\n            ")])],1)],1):e._e(),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5}},[e._v("\n              预订间数：\n            ")]),e._v(" "),o("el-col",{attrs:{span:19}},[e._v("\n              "+e._s(e.roomsDetails.number)+"\n            ")])],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:5}},[e._v("\n              支付方式：\n            ")]),e._v(" "),o("el-col",{attrs:{span:19}},[e._v("\n              "+e._s(e._f("PaymentMethod")(e.roomsDetails.payType))+"\n            ")])],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[o("el-row",{attrs:{gutter:25}},[o("el-col",{staticClass:"beizhu",attrs:{span:2}},[e._v("\n              备注：\n            ")]),e._v(" "),o("el-col",{attrs:{span:21}},[e.roomsDetails.remark?[o("p",[e._v(" "+e._s(e.roomsDetails.remark))])]:[o("p",[e._v("无")])]],2)],1)],1)],1)],1),e._v(" "),e.roomsDetails.length>0&&(4==e.roomsDetails.orderStatus||3==e.roomsDetails.orderStatus)?o("h4",[e._v("房间信息")]):e._e(),e._v(" "),e.roomsDetails.length>0&&(4==e.roomsDetails.orderStatus||3==e.roomsDetails.orderStatus)?o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roomsDetails.rooms}},[o("el-table-column",{attrs:{prop:"categoryName",label:"房间类型"}}),e._v(" "),o("el-table-column",{attrs:{prop:"roomNum",label:"房间号",width:"200px"}})],1):e._e(),e._v(" "),0!=e.roomsDetails.payStatus?o("h4",[e._v("支付详情")]):e._e(),e._v(" "),0!=e.roomsDetails.payStatus?o("div",{staticClass:"order-column"},[o("el-row",[o("el-col",{attrs:{span:24}},[o("el-row",{attrs:{gutter:25}},[o("el-col",{attrs:{span:2}},[e._v("\n              消费金额：\n            ")]),e._v(" "),o("el-col",{attrs:{span:21}},[e._v("\n              ￥"+e._s(e._f("money")(e.roomsDetails.receivablePrice+e.roomsDetails.Discountmoney))+"（房费：￥"+e._s(e._f("money")(e.roomsDetails.roomPrice*e.roomsDetails.number))+"、押金：￥"+e._s(e._f("money")(e.roomsDetails.deposit*e.roomsDetails.number))+"）\n            ")])],1)],1)],1),e._v(" "),0!=e.roomsDetails.Discountmoney&&0==e.roomsDetails.guestType&&e.roomsDetails.memberId?o("el-row",[o("el-col",{attrs:{span:24}},[o("el-row",{attrs:{gutter:25}},[o("el-col",{attrs:{span:2}},[e._v("\n              优惠金额：\n            ")]),e._v(" "),o("el-col",{attrs:{span:21}},[e._v("\n              -￥"+e._s(e._f("money")(e.roomsDetails.Discountmoney))+"（\n              "),e.roomsDetails.couponsDiscount?[e._v("优惠券：-￥"+e._s(e._f("money")(e.roomsDetails.couponsDiscount)))]:e._e(),e._v(" "),e.roomsDetails.couponsDiscount&&e.roomsDetails.integralDiscount||e.roomsDetails.couponsDiscount&&e.roomsDetails.fbDiscount?[e._v("、")]:e._e(),e._v(" "),e.roomsDetails.integralDiscount?[e._v("积分：-￥"+e._s(e._f("money")(e.roomsDetails.integralDiscount)))]:e._e(),e._v(" "),e.roomsDetails.integralDiscount&&e.roomsDetails.fbDiscount?[e._v("、")]:e._e(),e._v(" "),e.roomsDetails.fbDiscount?[e._v("粉币：-￥"+e._s(e._f("money")(e.roomsDetails.fbDiscount)))]:e._e(),e._v("\n              ）\n            ")],2)],1)],1)],1):e._e(),e._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[o("el-row",{attrs:{gutter:25}},[o("el-col",{attrs:{span:2}},[e._v("\n              应收金额：\n            ")]),e._v(" "),o("el-col",{attrs:{span:21}},[e._v("\n              ￥"+e._s(e._f("money")(e.roomsDetails.receivablePrice))+"\n            ")])],1)],1)],1),e._v(" "),3==e.roomsDetails.orderStatus?o("el-row",[o("el-col",{attrs:{span:24}},[o("el-row",{attrs:{gutter:25}},[o("el-col",{attrs:{span:2}},[e._v("\n              退还金额：\n            ")]),e._v(" "),o("el-col",{attrs:{span:21}},[e._v("\n              -￥"+e._s(e._f("money")(e.roomsDetails.refundAmount))+"\n            ")])],1)],1)],1):e._e(),e._v(" "),3==e.roomsDetails.orderStatus?o("el-row",[o("el-col",{attrs:{span:24}},[o("el-row",{attrs:{gutter:25}},[o("el-col",{attrs:{span:2}},[e._v("\n              实收金额：\n            ")]),e._v(" "),o("el-col",{attrs:{span:21}},[e._v("\n              ￥"+e._s(e._f("money")(e.roomsDetails.realPrice))+"\n            ")])],1)],1)],1):e._e()],1):e._e()],1),e._v(" "),o("el-dialog",{attrs:{title:"添加线下订单",visible:e.dialogFormVisible5,"modal-append-to-body":!1,"close-on-click-modal":!1,"custom-class":"fullmodal addOrder"},on:{"update:visible":function(t){e.dialogFormVisible5=t}}},[o("el-form",{ref:"addOrderform",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.addOrderform,rules:e.rules,"label-width":"95px"}},[o("el-form-item",{attrs:{label:"客人姓名：",prop:"customerName"}},[o("el-input",{attrs:{placeholder:"请输入客人姓名"},model:{value:e.addOrderform.customerName,callback:function(t){e.addOrderform.customerName=t},expression:"addOrderform.customerName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"证件类型：",prop:"customerIdType"}},[o("el-select",{attrs:{placeholder:"请选择证件类型"},model:{value:e.addOrderform.customerIdType,callback:function(t){e.addOrderform.customerIdType=t},expression:"addOrderform.customerIdType"}},[o("el-option",{attrs:{label:"二代身份证",value:"0"}}),e._v(" "),o("el-option",{attrs:{label:"一代身份证",value:"1"}}),e._v(" "),o("el-option",{attrs:{label:"驾驶证",value:"2"}}),e._v(" "),o("el-option",{attrs:{label:"护照",value:"3"}}),e._v(" "),o("el-option",{attrs:{label:"军官证",value:"4"}}),e._v(" "),o("el-option",{attrs:{label:"士兵证",value:"5"}}),e._v(" "),o("el-option",{attrs:{label:"港澳通行证",value:"6"}}),e._v(" "),o("el-option",{attrs:{label:"其他",value:"7"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"手机号码：",prop:"customerPhone"}},[o("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.addOrderform.customerPhone,callback:function(t){e.addOrderform.customerPhone=t},expression:"addOrderform.customerPhone"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"证件号码：",prop:"customerIdCard"}},[o("el-input",{attrs:{disabled:!e.addOrderform.customerIdType,placeholder:"请输入证件号码"},model:{value:e.addOrderform.customerIdCard,callback:function(t){e.addOrderform.customerIdCard=t},expression:"addOrderform.customerIdCard"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"性别：",prop:"customerGender"}},[o("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.addOrderform.customerGender,callback:function(t){e.addOrderform.customerGender=t},expression:"addOrderform.customerGender"}},[o("el-option",{attrs:{label:"男",value:"0"}}),e._v(" "),o("el-option",{attrs:{label:"女",value:"1"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"住客类型："}},[e._v("\n        散客/会员\n      ")]),e._v(" "),o("el-form-item",{attrs:{label:"入住标准："}},[e._v("\n        "+e._s(e._f("RoomType")(e.addOrderform.checkStandard))+"\n      ")]),e._v(" "),o("el-form-item",{attrs:{label:"入离日期：",prop:"roomTime"}},[o("el-date-picker",{attrs:{type:"daterange",placeholder:"请选择入离日期"},on:{change:e.roomTimechange},model:{value:e.addOrderform.roomTime,callback:function(t){e.addOrderform.roomTime=t},expression:"addOrderform.roomTime"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"酒店名称：",prop:"hotelId"}},[o("el-select",{attrs:{placeholder:"请选择酒店",disabled:e.roomData.length>0},model:{value:e.addOrderform.hotelId,callback:function(t){e.addOrderform.hotelId=t},expression:"addOrderform.hotelId"}},e._l(e.Hotellist1,function(e){return o("el-option",{key:e.hotelId,attrs:{label:e.name,value:e.hotelId}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"订单状态：",prop:"orderStatus"}},[o("el-select",{attrs:{placeholder:"请选择订单状态"},model:{value:e.addOrderform.orderStatus,callback:function(t){e.addOrderform.orderStatus=t},expression:"addOrderform.orderStatus"}},[o("el-option",{attrs:{label:"已入住 ",value:"4"}}),e._v(" "),o("el-option",{attrs:{label:"已完成",value:"3"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"支付方式：",prop:"payType"}},[o("el-select",{attrs:{placeholder:"请选择支付方式"},model:{value:e.addOrderform.payType,callback:function(t){e.addOrderform.payType=t},expression:"addOrderform.payType"}},[o("el-option",{attrs:{label:"支付宝支付",value:"0"}}),e._v(" "),o("el-option",{attrs:{label:"微信支付 ",value:"1"}}),e._v(" "),o("el-option",{attrs:{label:"到店支付",value:"2"}}),e._v(" "),o("el-option",{attrs:{label:"储值卡支付",value:"3"}}),e._v(" "),o("el-option",{attrs:{label:"现金",value:"5"}})],1)],1),e._v(" "),o("div",{staticStyle:{"margin-bottom":"15px"}},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addroom}},[e._v("选择房间")])],1),e._v(" "),0!=e.roomData.length?o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roomData}},[o("el-table-column",{attrs:{prop:"categoryName",label:"房间类型"}}),e._v(" "),o("el-table-column",{attrs:{prop:"roomNum",label:"房间号"}}),e._v(" "),o("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"small"},on:{click:function(o){e.handleEditroom(t.$index)}}},[e._v("删除")])]}}])})],1):e._e(),e._v(" "),0!=e.roomData.length?o("div",[o("el-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"消费金额："}},[e._v("\n          ￥"+e._s(e._f("money")(e.money.Total))+"（房费：￥"+e._s(e._f("money")(e.money.room))+"、押金：￥"+e._s(e._f("money")(e.money.deposit))+"）\n        ")])],1):e._e(),e._v(" "),0!=e.roomData.length?o("div",[o("el-form-item",{attrs:{label:"实收金额：",prop:"realPrice"}},[o("el-input",{attrs:{placeholder:"请输入金额"},model:{value:e.addOrderform.realPrice,callback:function(t){e.addOrderform.realPrice=t},expression:"addOrderform.realPrice"}},[o("template",{slot:"prepend"},[e._v("￥")])],2)],1)],1):e._e()],1),e._v(" "),0==e.roomData.length?o("div",{staticClass:"NoData"},[o("i",{staticClass:"el-icon-warning"}),e._v(" "),o("p",[e._v("还没有相关数据")])]):e._e(),e._v(" "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.Submit("addOrderform")}}},[e._v("确定")]),e._v(" "),o("el-button",{on:{click:e.Cancel}},[e._v("取 消")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"选择房间",visible:e.dialogFormVisible6,"modal-append-to-body":!1,"close-on-click-modal":!1,"custom-class":"fullmodal SetUpmodal"},on:{"update:visible":function(t){e.dialogFormVisible6=t}}},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[o("el-form-item",{attrs:{label:"房间类型："}},[o("el-select",{attrs:{disabled:e.roomData.length>0,placeholder:"房间类型"},on:{change:e.getrooms},model:{value:e.formInline.categoryId,callback:function(t){e.formInline.categoryId=t},expression:"formInline.categoryId"}},e._l(e.RoomTypes,function(e){return o("el-option",{key:e.categoryId,attrs:{label:e.name,value:e.categoryId}})}))],1),e._v(" "),o("el-input",{attrs:{placeholder:"输入房间号",icon:"search","on-icon-click":e.getrooms},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.getrooms(t)}},model:{value:e.formInline.roomNumber,callback:function(t){e.formInline.roomNumber=t},expression:"formInline.roomNumber"}})],1),e._v(" "),o("div",{staticClass:"Delivery-box clearfix"},[o("el-table",{ref:"multipleTable",staticStyle:{width:"300px"},attrs:{data:e.roomAll,height:"440","tooltip-effect":"dark"},on:{select:e.select,"select-all":e.allSelect}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{prop:"roomNum",label:"选择房号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"categoryName"}})],1),e._v(" "),o("i",{staticClass:"el-icon-arrow-right Delivery"}),e._v(" "),o("div",{staticClass:"Delivery-right"},[o("div",{staticClass:"Delivery-top"},[e._v("\n          已选择"+e._s(e.Selection.length)+"\n        ")]),e._v(" "),o("div",{staticClass:"Delivery-items"},e._l(e.Selection,function(t,a){return o("div",{key:a,staticClass:"Delivery-item"},[o("span",{staticClass:"item-left"},[e._v(e._s(t.roomNum))]),e._v(" "),o("span",[e._v(e._s(t.categoryName))]),e._v(" "),o("i",{staticClass:"el-icon-close fr",on:{click:function(t){e.deletefn(a)}}})])}))])],1),e._v(" "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.confirmfn}},[e._v("确 定")]),e._v(" "),o("el-button",{on:{click:e.qixiaofn}},[e._v("取 消")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"入住",visible:e.dialogFormVisible,"modal-append-to-body":!1,"close-on-click-modal":!1,"custom-class":"fullmodal orderDetails checkIndialog"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("h4",[e._v("客人资料")]),e._v(" "),o("div",{staticClass:"order-column"},[o("el-form",{ref:"checkInnewdata",staticClass:"demo-ruleForm",attrs:{model:e.checkInnewdata,rules:e.checkInrules,"label-width":"120px"}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"客人姓名："}},[e._v("\n              "+e._s(e.checkInnewdata.customerName)+"\n            ")])],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"住客类型："}},[e._v("\n              "+e._s(e._f("guestType")(e.checkIndata.guestType))+"\n            ")])],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"手机号码："}},[e._v("\n              "+e._s(e.checkInnewdata.customerPhone)+"\n            ")])],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"入住/离店时间："}},[e._v("\n              "+e._s(e._f("timeconvert")(e.checkIndata.roomInTime))+" / "+e._s(e._f("timeconvert")(e.checkIndata.roomOutTime))+"\n            ")])],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"入住标准："}},[e._v("\n              "+e._s(e._f("RoomType")(e.checkIndata.checkStandard))+"\n            ")])],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"房间类型："}},[e._v("\n              "+e._s(e.checkIndata.categoryName)+"\n            ")])],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"预订间数："}},[e._v("\n              "+e._s(e.checkIndata.number)+"\n            ")])],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"支付方式："}},[e._v("\n              "+e._s(e._f("PaymentMethod")(e.checkIndata.payType))+"\n            ")])],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"备注："}},[e.checkIndata.remark?[e._v(" "+e._s(e.checkIndata.remark))]:[e._v(" 无")]],2)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{staticClass:"mb-20",attrs:{label:"证件类型：",prop:"customerIdType"}},[o("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.checkInnewdata.customerIdType,callback:function(t){e.checkInnewdata.customerIdType=t},expression:"checkInnewdata.customerIdType"}},[o("el-option",{attrs:{label:"二代身份证 ",value:"0"}}),e._v(" "),o("el-option",{attrs:{label:"一代身份证",value:"1"}}),e._v(" "),o("el-option",{attrs:{label:"驾驶证",value:"2"}}),e._v(" "),o("el-option",{attrs:{label:"护照",value:"3"}}),e._v(" "),o("el-option",{attrs:{label:"军官证",value:"4"}}),e._v(" "),o("el-option",{attrs:{label:"港澳通行证",value:"5"}}),e._v(" "),o("el-option",{attrs:{label:"其他",value:"5"}})],1)],1)],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{staticClass:"mb-20",attrs:{label:"证件号码：",prop:"customerIdCard"}},[o("el-input",{attrs:{disabled:!e.checkInnewdata.customerIdType,placeholder:"请输入内容"},model:{value:e.checkInnewdata.customerIdCard,callback:function(t){e.checkInnewdata.customerIdCard=t},expression:"checkInnewdata.customerIdCard"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"性别：",prop:"customerGender"}},[o("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.checkInnewdata.customerGender,callback:function(t){e.checkInnewdata.customerGender=t},expression:"checkInnewdata.customerGender"}},[o("el-option",{attrs:{label:"男",value:"0"}}),e._v(" "),o("el-option",{attrs:{label:"女",value:"1"}})],1)],1)],1)],1)],1)],1),e._v(" "),o("h4",[e._v("支付详情")]),e._v(" "),o("div",[o("el-row",[o("el-col",{attrs:{span:24}},[o("el-row",{attrs:{gutter:25}},[o("el-col",{attrs:{span:2}},[e._v("\n              消费金额：\n            ")]),e._v(" "),o("el-col",{attrs:{span:21}},[e._v("\n              ￥"+e._s(e._f("money")(e.checkIndata.receivablePrice+e.checkIndata.Discountmoney))+"（房费：￥"+e._s(e._f("money")(e.checkIndata.roomPrice*e.checkIndata.number))+"、押金：￥"+e._s(e._f("money")(e.checkIndata.deposit*e.checkIndata.number))+"）\n            ")])],1)],1)],1),e._v(" "),0!=e.checkIndata.Discountmoney&&0==e.checkIndata.guestType&&e.checkIndata.memberId?o("el-row",[o("el-col",{attrs:{span:24}},[o("el-row",{attrs:{gutter:25}},[o("el-col",{attrs:{span:2}},[e._v("\n              优惠金额：\n            ")]),e._v(" "),o("el-col",{attrs:{span:21}},[e._v("\n              -￥"+e._s(e._f("money")(e.checkIndata.Discountmoney))+"（\n              "),e.checkIndata.couponsDiscount?[e._v("优惠券：-￥"+e._s(e._f("money")(e.checkIndata.couponsDiscount)))]:e._e(),e._v(" "),e.checkIndata.couponsDiscount&&e.checkIndata.integralDiscount||e.checkIndata.couponsDiscount&&e.checkIndata.fbDiscount?[e._v("、")]:e._e(),e._v(" "),e.checkIndata.integralDiscount?[e._v("积分：-￥"+e._s(e._f("money")(e.checkIndata.integralDiscount)))]:e._e(),e._v(" "),e.checkIndata.integralDiscount&&e.checkIndata.fbDiscount?[e._v("、")]:e._e(),e._v(" "),e.checkIndata.fbDiscount?[e._v("粉币：-￥"+e._s(e._f("money")(e.checkIndata.fbDiscount)))]:e._e(),e._v("\n              ）\n            ")],2)],1)],1)],1):e._e(),e._v(" "),o("el-col",{attrs:{span:24}},[o("el-row",{attrs:{gutter:25}},[o("el-col",{attrs:{span:2}},[e._v("\n            应收金额：\n          ")]),e._v(" "),o("el-col",{attrs:{span:21}},[e._v("\n            ￥"+e._s(e._f("money")(e.checkIndata.receivablePrice))+"\n            "),2!=e.checkIndata.payType?o("span",{staticClass:"bulefont"},[e._v("（已付）")]):e._e()])],1)],1)],1),e._v(" "),o("h4",[e._v("房间信息")]),e._v(" "),o("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.addcheckInrooms}},[e._v("选择房间")]),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.checkInroomData}},[o("el-table-column",{attrs:{prop:"categoryName",label:"房间类型"}}),e._v(" "),o("el-table-column",{attrs:{prop:"roomNum",label:"房间号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"roomNum",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"small"},on:{click:function(o){e.checkInhandleEditroom(t.$index)}}},[e._v("删除")])]}}])})],1),e._v(" "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.checkInensure("checkInnewdata")}}},[e._v("确定入住")]),e._v(" "),o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"选择房间",visible:e.dialogFormVisible10,"modal-append-to-body":!1,"close-on-click-modal":!1,"custom-class":"fullmodal SetUpmodal"},on:{"update:visible":function(t){e.dialogFormVisible10=t}}},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.checkInform}},[o("el-form-item",{attrs:{label:"房间类型："}},[o("el-select",{attrs:{disabled:"",placeholder:"房间类型"},model:{value:e.checkInform.categoryId,callback:function(t){e.checkInform.categoryId=t},expression:"checkInform.categoryId"}},e._l(e.checkInformRoomTypes,function(e){return o("el-option",{key:e.categoryId,attrs:{label:e.name,value:e.categoryId}})}))],1),e._v(" "),o("el-input",{attrs:{placeholder:"输入房间号",icon:"search","on-icon-click":e.checkIngetrooms},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.checkIngetrooms(t)}},model:{value:e.checkInform.roomNumber,callback:function(t){e.checkInform.roomNumber=t},expression:"checkInform.roomNumber"}})],1),e._v(" "),o("div",{staticClass:"Delivery-box clearfix"},[o("el-table",{ref:"multipleTable2",staticStyle:{width:"300px"},attrs:{data:e.checkInRoomAll,height:"440","tooltip-effect":"dark"},on:{select:e.checkInselect,"select-all":e.checkInallSelect}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{prop:"roomNum",label:"选择房号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"categoryName"}})],1),e._v(" "),o("i",{staticClass:"el-icon-arrow-right Delivery"}),e._v(" "),o("div",{staticClass:"Delivery-right"},[o("div",{staticClass:"Delivery-top"},[e._v("\n          已选择"+e._s(e.checkInSelection.length)+"\n        ")]),e._v(" "),o("div",{staticClass:"Delivery-items"},e._l(e.checkInSelection,function(t,a){return o("div",{key:a,staticClass:"Delivery-item"},[o("span",{staticClass:"item-left"},[e._v(e._s(t.roomNum))]),e._v(" "),o("span",[e._v(e._s(t.categoryName))]),e._v(" "),o("i",{staticClass:"el-icon-close fr",on:{click:function(t){e.checkIndeletefn(a)}}})])}))])],1),e._v(" "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.checkInconfirmfn}},[e._v("确 定")]),e._v(" "),o("el-button",{on:{click:e.qixiaofn2}},[e._v("取 消")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"结账退房",visible:e.dialogFormVisible11,"modal-append-to-body":!1,"close-on-click-modal":!1,"custom-class":"tinymodal checkOut"},on:{"update:visible":function(t){e.dialogFormVisible11=t}}},[o("el-form",{ref:"checkOutform",attrs:{model:e.checkOutform,rules:e.checkOutrules,"label-width":"120px"}},[o("div",{staticClass:"checkOutTop"},[o("el-form-item",{attrs:{label:"消费金额："}},[e._v("\n          ￥"+e._s(e._f("money")(e.checkOutdata.receivablePrice+e.checkOutdata.Discountmoney))+"（房费：￥"+e._s(e._f("money")(e.checkOutdata.roomPrice*e.checkOutdata.number))+"、押金：￥"+e._s(e._f("money")(e.checkOutdata.deposit*e.checkOutdata.number))+"）\n        ")]),e._v(" "),0!=e.checkOutdata.Discountmoney&&0==e.checkOutdata.guestType&&e.checkOutdata.memberId?o("el-form-item",{attrs:{label:"优惠金额："}},[e._v("\n          -￥"+e._s(e._f("money")(e.checkOutdata.Discountmoney))+"（\n          "),e.checkOutdata.couponsDiscount?[e._v("优惠券：-￥"+e._s(e._f("money")(e.checkOutdata.couponsDiscount)))]:e._e(),e._v(" "),e.checkOutdata.couponsDiscount&&e.checkOutdata.integralDiscount||e.checkOutdata.couponsDiscount&&e.checkOutdata.fbDiscount?[e._v("、")]:e._e(),e._v(" "),e.checkOutdata.integralDiscount?[e._v("积分：-￥"+e._s(e._f("money")(e.checkOutdata.integralDiscount)))]:e._e(),e._v(" "),e.checkOutdata.integralDiscount&&e.checkOutdata.fbDiscount?[e._v("、")]:e._e(),e._v(" "),e.checkOutdata.fbDiscount?[e._v("粉币：-￥"+e._s(e._f("money")(e.checkOutdata.fbDiscount)))]:e._e()],2):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"应收金额："}},[e._v("\n          ￥"+e._s(e._f("money")(e.checkOutdata.receivablePrice))+"\n          "),o("span",{staticClass:"bulefont"},[e._v("（已付）")])])],1),e._v(" "),o("el-form-item",{staticClass:"yajin",attrs:{label:"已收押金："}},[e._v("\n        ￥"+e._s(e._f("money")(e.checkOutdata.deposit*e.checkOutdata.number))+"\n      ")]),e._v(" "),o("el-form-item",{attrs:{label:"退还金额：",prop:"refundFee"}},[o("el-input",{model:{value:e.checkOutform.refundFee,callback:function(t){e.checkOutform.refundFee=t},expression:"checkOutform.refundFee"}}),e._v(" 元\n      ")],1),e._v(" "),o("el-form-item",{attrs:{label:"退还说明："}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.checkOutform.refundReason,callback:function(t){e.checkOutform.refundReason=t},expression:"checkOutform.refundReason"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.checkOutsubmit("checkOutform")}}},[e._v("确定")]),e._v(" "),o("el-button",{on:{click:function(t){e.checkOutreset("checkOutform")}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]}}},[163]);