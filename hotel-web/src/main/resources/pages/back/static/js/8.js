webpackJsonp([8],{102:function(e,t){e.exports=function(e,t,n,o){var s,r=e=e||{},a=typeof e.default;"object"!==a&&"function"!==a||(s=e,r=e.default);var i="function"==typeof r?r.options:r;if(t&&(i.render=t.render,i.staticRenderFns=t.staticRenderFns),n&&(i._scopeId=n),o){var c=Object.create(i.computed||null);Object.keys(o).forEach(function(e){var t=o[e];c[e]=function(){return t}}),i.computed=c}return{esModule:s,exports:r,options:i}}},103:function(e,t,n){var o=n(6),s=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return s.stringify.apply(s,arguments)}},226:function(e,t,n){n(293);var o=n(102)(n(255),n(308),null,null);e.exports=o.exports},243:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{}},methods:{},mounted:function(){},props:["msg"]}},244:function(e,t,n){t=e.exports=n(235)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"AddSuccess.vue",sourceRoot:""}])},245:function(e,t,n){var o=n(244);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(236)("3aaabfca",o,!0)},246:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("i",{staticClass:"el-icon-circle-check"}),e._v(" "),n("p",[e._v(e._s(e.msg))]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$router.go(0)}}},[e._v("继续添加")]),e._v(" "),n("el-button",{on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")])],1)},staticRenderFns:[]}},247:function(e,t,n){n(245);var o=n(102)(n(243),n(246),null,null);e.exports=o.exports},255:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(59),s=n.n(o),r=n(60),a=(n.n(r),n(10)),i=n(104),c=n(247),l=n.n(c);t.default={data:function(){return{active:1,step1:-1,records:[],form:{name:"",phone:"",address:"",introduction:""},rules:{name:[{required:!0,message:"请输入酒店名称"}],phone:[{required:!0,validator:i.phonetest}],address:[{required:!0,message:"请输入酒店地址"}],introduction:[{required:!0,message:"请输入酒店介绍"}]},longitude:null,latitude:null,map:null,addressArr:[],geocoder:null}},methods:{step1fn:function(e,t){if(e.hotelId)return this.$message({message:"该门店已存在酒店",type:"warning"}),!1;this.step1=t},nextStep:function(){this.active++,this.mapfn()},onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.geocoder.getLocation(t.form.address,function(e,n){"complete"==e&&"OK"==n.info?a.f.ADDdetailsmodify({params:{shopId:t.records[t.step1].shopId,name:t.form.name,tel:t.form.phone,addr:t.form.address,longitude:n.geocodes[0].location.lng,latitude:n.geocodes[0].location.lat,desc:t.form.introduction}}).then(function(e){0==e.code&&t.active++}):t.$message.error("获取经纬度失败")})})},mapfn:function(){function e(e){var t=JSON.parse(s()(e));o.form.address=t.formattedAddress,o.latitude=t.position.lat,o.longitude=t.position.lng}function t(e){}var n,o=this;o.map=new AMap.Map("container",{zoom:10,resizeEnable:!0}),o.map.plugin("AMap.Geolocation",function(){n=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e5,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"}),o.map.addControl(n),n.getCurrentPosition(),AMap.event.addListener(n,"complete",e),AMap.event.addListener(n,"error",t)}),AMap.service("AMap.Geocoder",function(){o.geocoder=new AMap.Geocoder({})})},mapsearch:function(e,t){var n=this;AMap.service(["AMap.PlaceSearch"],function(){var e=new AMap.PlaceSearch({type:"住宿服务|餐饮服务",pageSize:5,pageIndex:1,city:"010",map:n.map});n.addressArr=[],n.latitude=null,n.longitude=null,e.search(n.form.address,function(e,o){o&&o.poiList&&o.poiList.pois&&(o.poiList.pois.forEach(function(e){n.addressArr.push({value:e.pname+e.cityname+e.adname+e.address+e.name,address:e.pname+e.cityname+e.adname+e.address+e.name})}),t(n.addressArr))})})}},mounted:function(){var e=this,t=this;a.f.ADDstorelist().then(function(n){if(0==n.code)if(0!=n.data.length){t.records=n.data;for(var o=0;o<t.records.length;o++){var s=t.records[o];if(!s.hotelId)return t.step1=o,!1}}else e.$message({message:"请添加门店",type:"warning"})})},components:{AddSuccess:l.a}}},278:function(e,t,n){t=e.exports=n(235)(!0),t.push([e.i,"#container{width:700px;height:290px;border:1px solid #bfcbd9;margin-top:10px}#city{height:30px;display:none}","",{version:3,sources:["F:/Qiang/HotelsBackstage/src/views/Add/index/router/SelectStores.vue"],names:[],mappings:"AACA,WACE,YAAa,AACb,aAAc,AACd,yBAA0B,AAC1B,eAAiB,CAClB,AACD,MACE,YAAa,AACb,YAAc,CACf",file:"SelectStores.vue",sourcesContent:["\n#container {\r\n  width: 700px;\r\n  height: 290px;\r\n  border: 1px solid #bfcbd9;\r\n  margin-top: 10px;\n}\n#city {\r\n  height: 30px;\r\n  display: none;\n}\r\n"],sourceRoot:""}])},293:function(e,t,n){var o=n(278);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(236)("a0aaf4cc",o,!0)},308:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"addStep"},[n("div",{staticClass:"step-top"},[n("el-steps",{attrs:{active:e.active,center:!0,"align-center":!0}},[n("el-step",{attrs:{title:"选择门店"}}),e._v(" "),n("el-step",{attrs:{title:"酒店基本信息"}}),e._v(" "),n("el-step",{attrs:{title:"新增酒店成功"}})],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:1==e.active,expression:"active==1"}],staticClass:"step1 pl50"},[n("div",{staticClass:"clearfix"},e._l(e.records,function(t,o){return n("div",{key:o,staticClass:"item",class:{active:e.step1==o,Optional:!t.hotelId},on:{click:function(n){e.step1fn(t,o)}}},[n("div",{staticClass:"above clearfix"},[n("img",{attrs:{src:t.image}}),e._v(" "),n("div",{staticClass:"text"},[n("el-tooltip",{attrs:{effect:"dark",content:t.name,placement:"top-start"}},[n("h3",[e._v(e._s(t.name))])]),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:t.tel,placement:"top-start"}},[n("p",[e._v("联系电话："+e._s(t.tel))])]),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:t.addr,placement:"top-start"}},[n("p",{staticClass:"ellipsis"},[e._v("地址："+e._s(t.addr))])])],1)])])})),e._v(" "),n("div",{staticClass:"step1-bottom"},[0!=e.records.length&&e.step1>-1?n("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")]):e._e(),e._v(" "),n("el-button",{on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")])],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2==e.active,expression:"active==2"}],staticClass:"step2"},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"酒店名称：",prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"==typeof t?t.trim():t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"酒店电话：",prop:"phone"}},[n("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone","string"==typeof t?t.trim():t)},expression:"form.phone"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"酒店地址：",prop:"address"}},[n("el-autocomplete",{staticClass:"location",attrs:{"fetch-suggestions":e.mapsearch,placeholder:"请输入内容"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address","string"==typeof t?t.trim():t)},expression:"form.address"}}),e._v(" "),n("div",{attrs:{id:"container"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"酒店介绍：",prop:"introduction"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.form.introduction,callback:function(t){e.$set(e.form,"introduction","string"==typeof t?t.trim():t)},expression:"form.introduction"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v("保存")]),e._v(" "),n("el-button",{on:{click:function(t){e.active--}}},[e._v("返回")])],1)],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:3==e.active,expression:"active==3"}],staticClass:"step3"},[n("AddSuccess")],1)])},staticRenderFns:[]}},59:function(e,t,n){e.exports={default:n(103),__esModule:!0}}});