webpackJsonp([5],{102:function(t,e){t.exports=function(t,e,o,n){var r,i=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(r=t,i=t.default);var u="function"==typeof i?i.options:i;if(e&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns),o&&(u._scopeId=o),n){var a=Object.create(u.computed||null);Object.keys(n).forEach(function(t){var e=n[t];a[t]=function(){return e}}),u.computed=a}return{esModule:r,exports:i,options:u}}},103:function(t,e,o){var n=o(6),r=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},230:function(t,e,o){o(296);var n=o(102)(o(259),o(311),null,null);t.exports=n.exports},237:function(t,e,o){o(240);var n=o(102)(o(238),o(241),null,null);t.exports=n.exports},238:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{second:3}},methods:{},mounted:function(){var t=this,e=this,o=setInterval(function(){0==--e.second&&(t.second=3,clearInterval(o))},1e3)},watch:{flag:function(t,e){var o=this,n=this;if(n.flag)var r=setInterval(function(){0==--n.second&&(o.second=3,clearInterval(r))},1e3)}},props:["Popup","flag"]}},239:function(t,e,o){e=t.exports=o(235)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"confirm.vue",sourceRoot:""}])},240:function(t,e,o){var n=o(239);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);o(236)("6c0e45e8",n,!0)},241:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("i",{staticClass:"el-icon-circle-check"}),t._v(" "),o("div",{staticClass:"words"},[o("p",[t._v(t._s(t.Popup))]),t._v(" "),o("span",[t._v(t._s(t.second)+"秒后返回")])])])},staticRenderFns:[]}},259:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(59),r=o.n(n),i=o(237),s=o.n(i),u=o(10);e.default={data:function(){return{inputVisible:!1,roomname:"",inputValue:"",dialogFormVisible:!1,tErpHotelRoomSuites:[],Popup:"保存成功！",categoryId:this.$route.params.categoryId}},methods:{handleClose:function(t,e){t.roomnumber.splice(t.roomnumber.indexOf(e),1)},showInput:function(t){var e=this;t.inputVisible=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(t){var e=this,o=t.inputValue;o=function(t){return t.replace(/(^\s*)|(\s*$)/g,"")}(o);for(var n=0,r=0;r<o.length;r++){/^[\u0000-\u00ff]$/.test(o.charAt(r))?n+=1:n+=2}if(n>15)return e.$message.error("您输入的文字过长"),!1;if(function(t){if(""==t)return!0;return new RegExp("^[ ]+$").test(t)}(o))return e.$message.error("请输入正确的房间号"),!1;if(this.tErpHotelRoomSuites)for(var i=0;i<this.tErpHotelRoomSuites.length;i++){var s=this.tErpHotelRoomSuites[i].roomnumber;if(s)for(var r=0;r<s.length;r++)if(s[r].number==o)return e.$message.error("房间号有相同的"),!1}t.roomnumber.push({number:o}),t.inputVisible=!1,t.inputValue=""},showInput1:function(){var t=this;this.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm1:function(){var t=this,e=t.inputValue;if(function(t){if(""==t)return!0;return new RegExp("^[ ]+$").test(t)}(e))return t.$message.error("请输入正确的楼层"),!1;e=function(t){return t.replace(/(^\s*)|(\s*$)/g,"")}(e);for(var o=0,n=0;n<e.length;n++){/^[\u0000-\u00ff]$/.test(e.charAt(n))?o+=1:o+=2}if(o>15)return t.$message.error("您输入的文字过长"),!1;if(e){for(var n=0;n<t.tErpHotelRoomSuites.length;n++)if(t.tErpHotelRoomSuites[n].floor==e)return t.$message.error("楼层有相同的"),!1;var r={floor:e,roomnumber:[],inputVisible:!1,inputValue:""};t.tErpHotelRoomSuites.push(r)}this.inputVisible=!1,this.inputValue=""},handleEdit:function(t){this.tErpHotelRoomSuites.splice(t,1)},Preservation:function(){var t=this,e=[],o=this,n=!0;if(this.tErpHotelRoomSuites.forEach(function(t){0==t.roomnumber.length&&(this.$message({message:"请新增房间",type:"warning"}),n=!1),t.roomnumber.forEach(function(n){if(n.id)var r={categoryId:o.categoryId,floor:t.floor,number:n.number,id:n.id};else var r={categoryId:o.categoryId,floor:t.floor,number:n.number};e.push(r)},this)},this),!n)return!1;u.b.roomsuiteALL({Suffix:o.categoryId+"/room",params:r()(e)}).then(function(e){0==e.code&&(t.dialogFormVisible=!0,setTimeout(function(){o.dialogFormVisible=!1,o.$router.go(-1)},3e3))})}},mounted:function(){var t=this,e=this;u.b.roomlist({Suffix:this.categoryId+"/room"}).then(function(o){if(0==o.code&&0!=o.data.records.length){e.roomname=o.data.records[0].categoryName,e.tErpHotelRoomSuites=JSON.parse(r()(o.data.records)),e.tErpHotelRoomSuites=e.tErpHotelRoomSuites.map(function(t,e,o){var n=o.find(function(e){return t.floor===e.floor});return n!==t?void n.roomnumber.push({number:t.roomNum,id:t.id}):(n.roomnumber=[{number:n.roomNum,id:n.id}],n)}).filter(function(t){return void 0!==t}),e.tErpHotelRoomSuites.forEach(function(t){t.inputVisible=!1,t.inputValue=""},t);var n=r()(e.tErpHotelRoomSuites);e.tErpHotelRoomSuites=JSON.parse(n)}})},components:{confirm:s.a}}},281:function(t,e,o){e=t.exports=o(235)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Administration.vue",sourceRoot:""}])},296:function(t,e,o){var n=o(281);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);o(236)("442a8472",n,!0)},311:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"storey"},[o("div",{staticClass:"pagePath pl50"},[o("span",{staticClass:"bulefont",on:{click:function(e){t.$router.go(-1)}}},[t._v("新增房型 ")]),t._v(" /\n    "),o("span",[t._v("房间管理")])]),t._v(" "),o("div",{staticClass:"Administration"},[o("h3",[t._v("房间类型:"+t._s(t.roomname))]),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tErpHotelRoomSuites}},[o("el-table-column",{attrs:{prop:"floor",label:"楼层",width:"280"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-tag",{attrs:{type:"gray"}},[t._v(t._s(t._f("floor")(e.row.floor)))])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"name",label:"房间号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.roomnumber,function(n,r){return o("el-tag",{key:r,attrs:{closable:!0,"close-transition":!1},on:{close:function(o){t.handleClose(e.row,n)}}},[t._v("\n            "+t._s(n.number)+"\n          ")])}),t._v(" "),e.row.inputVisible?o("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"mini"},on:{blur:function(o){t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(o){if(!("button"in o)&&t._k(o.keyCode,"enter",13,o.key))return null;t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(o){t.$set(e.row,"inputValue","string"==typeof o?o.trim():o)},expression:"scope.row.inputValue"}}):o("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(o){t.showInput(e.row)}}},[t._v("+ 新房间")])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"small"},on:{click:function(o){t.handleEdit(e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),o("div",{staticClass:"addcolumn"},[t.inputVisible?o("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"mini"},on:{blur:t.handleInputConfirm1},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.handleInputConfirm1(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue="string"==typeof e?e.trim():e},expression:"inputValue"}}):o("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput1}},[t._v("+ 新楼层")])],1),t._v(" "),o("div",{staticClass:"step1-bottom"},[o("el-button",{attrs:{type:"primary"},on:{click:t.Preservation}},[t._v("保存")]),t._v(" "),o("el-button",{on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")])],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"提示",visible:t.dialogFormVisible,"modal-append-to-body":!1,"close-on-click-modal":!1,"custom-class":"Smallmodal storey"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("confirm",{attrs:{Popup:t.Popup,flag:t.dialogFormVisible}})],1)],1)},staticRenderFns:[]}},59:function(t,e,o){t.exports={default:o(103),__esModule:!0}}});