webpackJsonp([1],{109:function(t,e,a){a(264);var n=a(2)(a(178),a(289),"data-v-5bf9b3e7",null);t.exports=n.exports},110:function(t,e,a){a(259);var n=a(2)(a(179),a(284),null,null);t.exports=n.exports},111:function(t,e,a){a(271);var n=a(2)(a(180),a(296),"data-v-923d7f70",null);t.exports=n.exports},166:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(1),l=a(11),s=(a(9),a(69)),o=a(109),i=a.n(o),r=a(110),c=a.n(r),d=a(111),m=a.n(d),u=a(4);n.default.use(s.a);var p=[{path:"/",redirect:function(t){return"/Increase"}},{path:"/Increase",component:c.a},{path:"/SelectStores",component:m.a},{path:"/Editor/:hotelId",component:i.a}];n.default.use(l.a);var f=new l.a({routes:p});new n.default({router:f,store:u.a}).$mount("#app")},178:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(30),l=a.n(n),s=a(0),o=a(12);e.default={data:function(){return{details:{},records:"",store:"",markersArray:[],citylocation:null,map:null,marker:null,geocoder:null,itylocation:null,lat:23.111847,lng:114.416196,rules:{name:[{required:!0,message:"请输入酒店名称"}],phone:[{required:!0,validator:o.phonetest}],address:[{required:!0,message:"请输入酒店地址"}],desc:[{required:!0,message:"酒店介绍"}]}}},methods:{onSubmit:function(t){var e=this,a=this;this.$refs[t].validate(function(t){if(!t)return!1;s.f.ADDdetailsmodify({params:{hotelId:a.details.hotelId,shopId:a.details.shopId,name:a.details.name,tel:a.details.phone,addr:a.details.address,longitude:a.lat,latitude:a.lng,desc:a.details.desc},fn:function(t){e.$message({message:"修改成功",type:"success"}),setTimeout(function(){a.$router.go(-1)},1e3)}})})},mapfn:function(){var t=this;t.markersArray=[];var e=new qq.maps.LatLng(t.lat,t.lng);t.map=new qq.maps.Map(document.getElementById("container"),{center:e,zoom:15}),t.citylocation=new qq.maps.CityService({complete:function(e){t.map.setCenter(e.detail.latLng),t.lat=e.detail.latLng.lat,t.lng=e.detail.latLng.lng;var a=new qq.maps.Marker({map:t.map,position:e.detail.latLng});t.markersArray.push(a)}}),qq.maps.event.addListener(t.map,"click",function(e){if(t.markersArray){for(var a=0;a<t.markersArray.length;a++)t.markersArray[a].setMap(null);t.markersArray.length=0}var n=new qq.maps.Marker({position:e.latLng,animation:qq.maps.MarkerAnimation.DROP,map:t.map});t.markersArray.push(n),l()({method:"get",baseURL:"",url:"/apitest/v1/?location="+e.latLng.lat+","+e.latLng.lng+"&key=M3KBZ-QUMKU-YJQVE-2OETC-N7TJ5-VLBJW",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(a){0==a.data.status&&(t.lat=e.latLng.lat,t.lng=e.latLng.lng,t.details.address=a.data.result.formatted_addresses.recommend.replace(/\(.*?\)/g,""))}).catch(function(t){})}),t.geocoder=new qq.maps.Geocoder({complete:function(e){t.lat=e.detail.location.lat,t.lng=e.detail.location.lng,t.map.setCenter(e.detail.location);var a=new qq.maps.Marker({map:t.map,position:e.detail.location});t.markersArray.push(a)}});var a=t.details.address;t.geocoder.getLocation(a)},mapfn1:function(){var t=this;t.citylocation=new qq.maps.CityService({complete:function(e){t.map.setCenter(e.detail.latLng),t.lat=e.detail.latLng.lat,t.lng=e.detail.latLng.lng}}),t.citylocation=new qq.maps.CityService({complete:function(e){t.lat=e.detail.latLng.lat,t.lng=e.detail.latLng.lng,t.map.setCenter(e.detail.latLng),l()({method:"get",baseURL:"",url:"/apitest/v1/?location="+e.detail.latLng.lat+","+e.detail.latLng.lng+"&key=M3KBZ-QUMKU-YJQVE-2OETC-N7TJ5-VLBJW",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(a){if(0==a.data.status){if(t.lat=e.detail.latLng.lng,t.lng=e.detail.latLng.lng,t.form.address=a.data.result.formatted_addresses.recommend.replace(/\(.*?\)/g,""),t.markersArray){for(var n=0;n<t.markersArray.length;n++)t.markersArray[n].setMap(null);t.markersArray.length=0}var l=new qq.maps.Marker({position:e.detail.latLng,animation:qq.maps.MarkerAnimation.DROP,map:t.map});t.markersArray.push(l)}}).catch(function(t){console.log(1111)})}}),t.citylocation.searchLocalCity()}},mounted:function(){var t=this;this.mapfn();var e=this;s.f.ADDstorelist({fn:function(a){e.records=a,s.a.Hotellist({params:{hotelId:t.$route.params.hotelId},fn:function(a){t.details=a.records[0],e.records.forEach(function(t){t.shopid==e.details.shopId&&(e.store=t,console.log(e.store,"_this.store"))},t);var n=new qq.maps.LatLng(a.records[0].longitude,a.records[0].latitude);e.citylocation.searchCityByLatLng(n)}})}})},created:function(){}}},179:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(0);a(4);e.default={data:function(){return{dialogTableVisible:!1,dialogFormVisible1:!1,Hotellist:[],deleteid:"",codedata:"",baseURL:""}},methods:{deleteBox:function(t){this.deleteid=t,this.dialogFormVisible1=!0},deletefn:function(){var t=this,e=this;n.f.ADDdelete({params:"["+e.deleteid+"]",fn:function(a){t.$message({message:"删除成功",type:"success"}),setTimeout(function(){e.$router.go(0)},1e3)}}),this.dialogFormVisible1=!1},linkbtn:function(t){var e=this;n.f.hotelLink({Suffix:t+"/link",fn:function(t){e.codedata=t,e.dialogTableVisible=!0}})},linkcopy:function(t){var e=this.$refs[t].$refs.input;e.focus();var a=document.activeElement;e.setSelectionRange(0,e.value.length),document.execCommand("copy",!0),a.focus()},downloadfn:function(){window.open(this.baseURL+"/back/hotel/qrcode?url="+this.codedata.longUrl)}},mounted:function(){var t=this;n.a.Hotellist({fn:function(e){t.Hotellist=e.records}}),this.$store.dispatch("getbackconfig").then(function(){t.baseURL=t.$store.state.baseURL})}}},180:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(30),l=a.n(n),s=a(0),o=a(12),i=a(67),r=a.n(i);e.default={data:function(){return{active:0,step1:0,records:[],form:{name:"",phone:"",address:"",introduction:""},markersArray:[],citylocation:null,map:null,marker:null,geocoder:null,itylocation:null,lat:23.111847,lng:114.416196,rules:{name:[{required:!0,message:"请输入酒店名称"}],phone:[{required:!0,validator:o.phonetest}],address:[{required:!0,message:"请输入酒店地址"}],introduction:[{required:!0,message:"请输入酒店介绍"}]}}},methods:{step1fn:function(t){this.step1=t},nextStep:function(){this.active++},onSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;console.log(e.records[e.step1]),s.f.ADDdetailsmodify({params:{shopId:e.records[e.step1].shopid,name:e.form.name,tel:e.form.phone,addr:e.form.address,longitude:e.lat,latitude:e.lng,desc:e.form.introduction},fn:function(t){e.active++}})})},mapfn:function(t){var e=this;e.markersArray=[];var a=new qq.maps.LatLng(e.lat,e.lng);if(e.map=new qq.maps.Map(document.getElementById("container"),{center:a,zoom:15}),e.citylocation=new qq.maps.CityService({complete:function(t){e.map.setCenter(t.detail.latLng),e.lat=t.detail.latLng.lat,e.lng=t.detail.latLng.lng;var a=new qq.maps.Marker({map:e.map,position:t.detail.latLng});e.markersArray.push(a)}}),qq.maps.event.addListener(e.map,"click",function(t){if(e.markersArray){for(var a=0;a<e.markersArray.length;a++)e.markersArray[a].setMap(null);e.markersArray.length=0}var n=new qq.maps.Marker({position:t.latLng,animation:qq.maps.MarkerAnimation.DROP,map:e.map});e.markersArray.push(n),l()({method:"get",baseURL:"",url:"/apitest/v1/?location="+t.latLng.lat+","+t.latLng.lng+"&key=M3KBZ-QUMKU-YJQVE-2OETC-N7TJ5-VLBJW",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(a){0==a.data.status&&(e.lat=t.latLng.lat,e.lng=t.latLng.lng,e.form.address=a.data.result.formatted_addresses.recommend.replace(/\(.*?\)/g,""))}).catch(function(t){Message.error("网络出错")})}),t){e.geocoder=new qq.maps.Geocoder({complete:function(t){e.lat=t.detail.location.lat,e.lng=t.detail.location.lng,e.map.setCenter(t.detail.location);var a=new qq.maps.Marker({map:e.map,position:t.detail.location});e.markersArray.push(a)}});var n=e.form.address;e.geocoder.getLocation(n)}else e.citylocation=new qq.maps.CityService({complete:function(t){e.lat=t.detail.latLng.lat,e.lng=t.detail.latLng.lng,e.map.setCenter(t.detail.latLng)}}),e.citylocation.searchLocalCity(),setTimeout(function(){var t=new qq.maps.Marker({position:new qq.maps.LatLng(e.lat,e.lng),animation:qq.maps.MarkerAnimation.DROP,map:e.map});e.markersArray.push(t)},1e3)},mapfn1:function(){var t=this;t.citylocation=new qq.maps.CityService({complete:function(e){t.map.setCenter(e.detail.latLng),t.lat=e.detail.latLng.lat,t.lng=e.detail.latLng.lng}}),t.citylocation=new qq.maps.CityService({complete:function(e){t.lat=e.detail.latLng.lat,t.lng=e.detail.latLng.lng,t.map.setCenter(e.detail.latLng),l()({method:"get",baseURL:"",url:"/apitest/v1/?location="+e.detail.latLng.lat+","+e.detail.latLng.lng+"&key=M3KBZ-QUMKU-YJQVE-2OETC-N7TJ5-VLBJW",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(a){if(0==a.data.status){if(t.lat=e.detail.latLng.lng,t.lng=e.detail.latLng.lng,t.form.address=a.data.result.formatted_addresses.recommend.replace(/\(.*?\)/g,""),t.markersArray){for(var n=0;n<t.markersArray.length;n++)t.markersArray[n].setMap(null);t.markersArray.length=0}var l=new qq.maps.Marker({position:e.detail.latLng,animation:qq.maps.MarkerAnimation.DROP,map:t.map});t.markersArray.push(l)}}).catch(function(e){t.Message.error("网络出错")})}}),t.citylocation.searchLocalCity()}},mounted:function(){var t=this;s.f.ADDstorelist({fn:function(e){t.records=e}}),t.mapfn(!1)},components:{AddSuccess:r.a}}},259:function(t,e){},264:function(t,e){},271:function(t,e){},284:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Increase"},[a("div",{staticClass:"video-top"},[a("router-link",{staticClass:"el-button el-button--primary el-button--small",attrs:{to:"/SelectStores",tag:"el-button"}},[t._v("新增酒店")]),t._v(" "),a("el-button",{staticClass:"video fr",attrs:{type:"warning",size:"small"}},[a("i",{staticClass:"iconfont icon-shipin"}),t._v("视频教程")])],1),t._v(" "),a("div",{staticClass:"pl50"},[t._m(0),t._v(" "),a("div",{staticClass:"clearfix"},t._l(t.Hotellist,function(e,n){return a("div",{key:n,staticClass:"item"},[a("div",{staticClass:"above clearfix"},[a("img",{attrs:{src:e.logoUrl}}),t._v(" "),a("div",{staticClass:"text"},[a("el-tooltip",{attrs:{effect:"dark",content:e.name,placement:"top-start"}},[a("h3",[t._v(t._s(e.name))])]),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:e.phone,placement:"top-start"}},[a("p",[t._v("联系电话："+t._s(e.phone))])]),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:e.address,placement:"top-start"}},[a("p",{staticClass:"ellipsis"},[t._v("地址："+t._s(e.address))])])],1)]),t._v(" "),a("div",{staticClass:"item-bottom"},[a("router-link",{staticClass:"el-button blue-button el-button--default el-button--small",attrs:{to:"/Editor/"+e.hotelId,tag:"el-button"}},[t._v("编辑")]),t._v(" "),a("el-button",{staticClass:"blue-button",attrs:{size:"small"},on:{click:function(a){t.linkbtn(e.hotelId)}}},[t._v("链接")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){t.deleteBox(e.hotelId)}}},[t._v("删除")])],1)])}))]),t._v(" "),a("el-dialog",{attrs:{title:"酒店链接",visible:t.dialogTableVisible,"modal-append-to-body":!1,"close-on-click-modal":!1,"custom-class":"tinymodal HotelLink"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("div",{staticClass:"itemColumn clearfix"},[a("span",{staticClass:"Columnleft"},[t._v("酒店二维码：")]),t._v(" "),a("div",{staticClass:"Columnright"},[a("img",{attrs:{src:t.baseURL+"/back/hotel/qrcode?url="+t.codedata.longUrl}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.downloadfn}},[t._v("下载二维码")])],1)]),t._v(" "),a("div",{staticClass:"itemColumn clearfix"},[a("span",{staticClass:"Columnleft"},[t._v("酒店链接：")]),t._v(" "),a("div",{staticClass:"Columnright"},[a("el-input",{ref:"longUrl",attrs:{placeholder:"请输入内容"},model:{value:t.codedata.longUrl,callback:function(e){t.codedata.longUrl=e},expression:"codedata.longUrl"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.linkcopy("longUrl")}}},[t._v("复制")])],1)]),t._v(" "),a("div",{staticClass:"itemColumn clearfix"},[a("span",{staticClass:"Columnleft"},[t._v("短信链接：")]),t._v(" "),a("div",{staticClass:"Columnright"},[a("el-input",{ref:"shortUrl",attrs:{placeholder:"请输入内容"},model:{value:t.codedata.shortUrl,callback:function(e){t.codedata.shortUrl=e},expression:"codedata.shortUrl"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.linkcopy("shortUrl")}}},[t._v("复制")])],1)])]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogFormVisible1,"modal-append-to-body":!1,"close-on-click-modal":!1,"custom-class":"Smallmodal"},on:{"update:visible":function(e){t.dialogFormVisible1=e}}},[a("p",[t._v("是否确认删除酒店，删除后数据将无法恢复")]),t._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.deletefn}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogFormVisible1=!1}}},[t._v("取 消")])],1)])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Increase-title"},[a("h2",[t._v("已创建的酒店")])])}]}},289:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Editor"},[a("div",{staticClass:"pagePath pl50"},[a("span",{staticClass:"bulefont",on:{click:function(e){t.$router.go(-1)}}},[t._v("新增酒店")]),t._v(" /\n        "),a("span",[t._v("编辑")])]),t._v(" "),a("el-form",{ref:"details",attrs:{model:t.details,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{staticClass:"mb",attrs:{label:"所属门店："}},[a("span",{domProps:{textContent:t._s(t.store.name)}})]),t._v(" "),a("el-form-item",{staticClass:"mb",attrs:{label:"联系电话："}},[a("span",{domProps:{textContent:t._s(t.store.tel)}})]),t._v(" "),a("el-form-item",{attrs:{label:"地址："}},[a("span",{domProps:{textContent:t._s(t.store.addr)}})]),t._v(" "),a("el-form-item",{attrs:{label:"酒店名称：",prop:"name"}},[a("el-input",{model:{value:t.details.name,callback:function(e){t.details.name=e},expression:"details.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"酒店电话：",prop:"phone"}},[a("el-input",{model:{value:t.details.phone,callback:function(e){t.details.phone=t._n(e)},expression:"details.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"酒店地址：",prop:"address"}},[a("el-input",{staticClass:"location",attrs:{icon:"warning","on-icon-click":t.mapfn1},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.mapfn()}},model:{value:t.details.address,callback:function(e){t.details.address=e},expression:"details.address"}}),t._v(" "),a("div",{attrs:{id:"container"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"酒店介绍：",prop:"desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.details.desc,callback:function(e){t.details.desc=e},expression:"details.desc "}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onSubmit("details")}}},[t._v("保存")]),t._v(" "),a("router-link",{staticClass:"el-button el-button--default",attrs:{to:"/Increase",tag:"el-button"}},[t._v("返回")])],1)],1)],1)},staticRenderFns:[]}},296:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addStep"},[a("div",{staticClass:"step-top"},[a("el-steps",{attrs:{active:t.active,center:!0,"align-center":!0}},[a("el-step",{attrs:{title:"选择门店"}}),t._v(" "),a("el-step",{attrs:{title:"酒店基本信息"}}),t._v(" "),a("el-step",{attrs:{title:"新增酒店成功"}})],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.active,expression:"active==0"}],staticClass:"step1 pl50"},[a("div",{staticClass:"clearfix"},t._l(t.records,function(e,n){return a("div",{key:n,staticClass:"item",class:{active:t.step1==n},on:{click:function(e){t.step1fn(n)}}},[a("div",{staticClass:"above clearfix"},[a("img",{attrs:{src:e.image}}),t._v(" "),a("div",{staticClass:"text"},[a("el-tooltip",{attrs:{effect:"dark",content:e.name,placement:"top-start"}},[a("h3",[t._v(t._s(e.name))])]),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:e.tel,placement:"top-start"}},[a("p",[t._v("联系电话："+t._s(e.tel))])]),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:e.addr,placement:"top-start"}},[a("p",{staticClass:"ellipsis"},[t._v("地址："+t._s(e.addr))])])],1)])])})),t._v(" "),a("div",{staticClass:"step1-bottom"},[a("el-button",{attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("下一步")]),t._v(" "),a("el-button",{on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")])],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.active,expression:"active==1"}],staticClass:"step2"},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"酒店名称：",prop:"name"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.form.name=e},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"酒店电话：",prop:"phone"}},[a("el-input",{model:{value:t.form.phone,callback:function(e){t.form.phone=e},expression:"form.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"酒店地址：",prop:"address"}},[a("el-input",{staticClass:"location",attrs:{icon:"warning","on-icon-click":t.mapfn1},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.mapfn(!0)}},model:{value:t.form.address,callback:function(e){t.form.address=e},expression:"form.address"}}),t._v(" "),a("div",{attrs:{id:"container"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"酒店介绍：",prop:"introduction"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.introduction,callback:function(e){t.form.introduction=e},expression:"form.introduction"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onSubmit("form")}}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:function(e){t.active--}}},[t._v("返回")])],1)],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.active,expression:"active==2"}],staticClass:"step3"},[a("AddSuccess")],1)])},staticRenderFns:[]}},46:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{}},methods:{},mounted:function(){},props:["msg"]}},65:function(t,e){},66:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("i",{staticClass:"el-icon-circle-check"}),t._v(" "),a("p",[t._v(t._s(t.msg))]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.$router.go(0)}}},[t._v("继续添加")]),t._v(" "),a("el-button",{on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")])],1)},staticRenderFns:[]}},67:function(t,e,a){a(65);var n=a(2)(a(46),a(66),null,null);t.exports=n.exports}},[166]);